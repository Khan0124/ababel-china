$(document).ready(function(){$(".sidebar-toggle").click(function(){$(".sidebar").toggleClass("show")});$(".alert").delay(5000).fadeOut();$('form[data-confirm]').submit(function(e){var message=$(this).data("confirm");if(!confirm(message)){e.preventDefault();return false}});$(".btn-delete").click(function(e){e.preventDefault();var href=$(this).attr("href");if(confirm("هل أنت متأكد من الحذف؟")){window.location.href=href}});$(".number-format").each(function(){var value=parseFloat($(this).text());if(!isNaN(value)){$(this).text(value.toLocaleString())}});$('input[type="number"]').on('input',function(){var val=$(this).val();if(val<0){$(this).val(0)}});$(".auto-submit").change(function(){$(this).closest("form").submit()});$(".tooltip-trigger").tooltip();$(".copy-to-clipboard").click(function(){var text=$(this).data("clipboard-text");if(navigator.clipboard){navigator.clipboard.writeText(text).then(function(){alert("تم النسخ بنجاح")}).catch(function(){console.error("Failed to copy")})}else{var textArea=document.createElement("textarea");textArea.value=text;document.body.appendChild(textArea);textArea.focus();textArea.select();try{document.execCommand("copy");alert("تم النسخ بنجاح")}catch(err){console.error("Failed to copy")}document.body.removeChild(textArea)}});$(".collapse-toggle").click(function(){var target=$(this).data("target");$(target).slideToggle()});if(typeof $.fn.DataTable!=="undefined"){$(".data-table").DataTable({pageLength:25,language:{url:"//cdn.datatables.net/plug-ins/1.10.25/i18n/Arabic.json"},responsive:true,dom:'<"row"<"col-sm-12 col-md-6"l><"col-sm-12 col-md-6"f>>rt<"row"<"col-sm-12 col-md-5"i><"col-sm-12 col-md-7"p>>'})}});function showLoading(){$("#loading-overlay").removeClass("d-none")}function hideLoading(){$("#loading-overlay").addClass("d-none")}function showAlert(type,message){var alertClass="alert-"+type;var alertHTML='<div class="alert '+alertClass+' alert-dismissible fade show" role="alert">'+message+'<button type="button" class="close" data-dismiss="alert"><span>&times;</span></button></div>';$("#alerts-container").html(alertHTML);$(".alert").delay(5000).fadeOut()}function formatCurrency(amount,currency){var formatter=new Intl.NumberFormat("ar-SA",{style:"currency",currency:currency||"RMB",minimumFractionDigits:2});return formatter.format(amount)}function debounce(func,wait,immediate){var timeout;return function executedFunction(){var context=this;var args=arguments;var later=function(){timeout=null;if(!immediate)func.apply(context,args)};var callNow=immediate&&!timeout;clearTimeout(timeout);timeout=setTimeout(later,wait);if(callNow)func.apply(context,args)}}var searchInput=document.getElementById("search");if(searchInput){searchInput.addEventListener("input",debounce(function(){var searchTerm=this.value.toLowerCase();var tableRows=document.querySelectorAll("table tbody tr");tableRows.forEach(function(row){var text=row.textContent.toLowerCase();row.style.display=text.includes(searchTerm)?"":"none"})},300))}document.addEventListener("DOMContentLoaded",function(){var lazyImages=document.querySelectorAll("img[data-src]");if("IntersectionObserver"in window){var imageObserver=new IntersectionObserver(function(entries,observer){entries.forEach(function(entry){if(entry.isIntersecting){var image=entry.target;image.src=image.dataset.src;image.classList.remove("lazy");observer.unobserve(image)}})});lazyImages.forEach(function(image){imageObserver.observe(image)})}else{lazyImages.forEach(function(image){image.src=image.dataset.src;image.classList.remove("lazy")})}});